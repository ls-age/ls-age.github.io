{"nameWithOwner":"ls-age/svelte-mail","url":"https://github.com/ls-age/svelte-mail","description":"Renders Svelte components for emails. Inlines styles and renders additional plain text version.","pushedAt":"2019-10-08T22:56:14Z","stargazers":{"totalCount":5},"releases":{"nodes":[{"tagName":"v0.1.1"}]},"readme":{"title":"svelte-mail","slug":"svelte-mail","sections":[{"title":"Installation","slug":"installation"},{"title":"Usage","slug":"usage"},{"title":"Options","slug":"options"}],"content":"<h1 id=\"svelte-mail\">svelte-mail</h1><blockquote>\n<p>Renders <a href=\"https://svelte.dev\">Svelte</a> components for emails. Inlines styles and renders additional plain text version.</p>\n</blockquote>\n<p><a href=\"https://circleci.com/gh/ls-age/svelte-mail/tree/master\"><img src=\"https://circleci.com/gh/ls-age/svelte-mail/tree/master.svg?style=svg\" alt=\"CircleCI\"></a></p>\n<h2 id=\"installation\">Installation</h2><p>Run <code>npm i --save svelte-mail</code>.</p>\n<h2 id=\"usage\">Usage</h2><p>Simply pass a Svelte component and some options:</p>\n<p><em><code>./components/Mail.svelte</code></em></p>\n<pre><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"javascript\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">let</span> user;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span>&gt;</span><span class=\"css\"><span class=\"hljs-selector-tag\">strong</span> { <span class=\"hljs-attribute\">color</span>: red }</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">strong</span>&gt;</span>Hello, {user}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">strong</span>&gt;</span></code></pre>\n<p><em><code>./sendMail.js</code></em></p>\n<pre><code class=\"language-javascript\"><span class=\"hljs-keyword\">import</span> { renderMail } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'svelte-mail'</span>;\n<span class=\"hljs-keyword\">import</span> Mail <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./components/Mail.svelte'</span>;\n\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">sendMail</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-keyword\">const</span> { html, text } = <span class=\"hljs-keyword\">await</span> renderMail(Mail, { <span class=\"hljs-attr\">data</span>: { <span class=\"hljs-attr\">user</span>: <span class=\"hljs-string\">'World'</span> } });\n\n  <span class=\"hljs-comment\">/*\n    `html` contains the rendered html string:\n    \"&lt;strong style=\"color: red\"&gt;Hello, World&lt;/strong&gt;\"\n\n    `text` contains the rendered plain text message:\n    \"Hello, World\"\n  */</span>\n\n  <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">TODO:</span> Send mail, e.g. using nodemailer...</span>\n}\n\nsendMail()\n  .catch(<span class=\"hljs-built_in\">console</span>.error);</code></pre>\n<p><strong>Note: The mail component must be compiled for server side rendering.</strong></p>\n<h2 id=\"options\">Options</h2><p>Internally, this module uses <a href=\"https://www.npmjs.com/package/juice\">juice</a> to inline styles and <a href=\"https://www.npmjs.com/package/html-to-text\">html-to-text</a> to render plain text messages. All options passed to the <em>renderMail</em> function will be passed to them:</p>\n<pre><code class=\"language-javascript\">renderMail(Mail, {\n  <span class=\"hljs-attr\">data</span>: {},\n  <span class=\"hljs-comment\">// add any juice options here, e.g.:</span>\n  extraCss: <span class=\"hljs-string\">'strong { text-decoration: underline }'</span>,\n  <span class=\"hljs-comment\">// add any html-to-text options here, e.g.:</span>\n  uppercaseHeadings: <span class=\"hljs-literal\">false</span>,\n});</code></pre>\n"}}